:root {
  --bg: #23242a;
  --card: #282934;
  --input: #25293c;
  --highlight: #3399ff;
  --text: #f4f7fa;
  --shadow: 0 4px 22px #112 35%;
  --accent-high: #e74c3c;
  --accent-medium: #f39c12;
  --accent-low: #2ecc71;
  --tag: #236bdd;
  --blue: #1d8bf1;
  --rounded: 13px;
  --task-gradient: linear-gradient(135deg, #293040 65%, #1d2130 100%);
}

html, body {
  margin: 0; padding: 0; background: var(--bg); color: var(--text);
  font-family: 'Segoe UI',Tahoma,Verdana,sans-serif; min-height:100vh;
}

.header-row {
  display: flex; justify-content: space-between; align-items: center;
  margin: 24px auto 7px auto; width: 98vw;
  min-height: 54px; padding:0 0 10px 0;
  gap:22px;
}

.search-box {
  margin-left:12px;
  min-width:210px;
  flex:0 0 220px;
  display: flex; align-items: center;
}

.search-box input {
  background: var(--input);
  border-radius:8px;
  border:1.2px solid #347aac;
  color: #f6fafe;
  outline:none;
  font-size:1em;
  padding:7px 10px;
  width:190px;
  box-shadow:0 2px 7px #2336;
  margin-left:5px;
}

.search-box input:focus {
  border-color: var(--highlight);
}

.top-controls {
  display:flex; gap:9px; align-items:center;
}

.mini-btn {
  background: #23293d;
  color: #fff;
  padding: 7px 13px;
  border: none;
  border-radius: 7px;
  font-size: 1.01em;
  font-weight: 600;
  box-shadow: 0 2px 8px #1a213387;
  transition: background .13s,transform .18s;
  cursor: pointer;
  min-width: 36px;
  position: relative;
  outline: none;
  display:flex;align-items:center;justify-content:center;
}

.mini-btn:hover {
  background: var(--blue);
  color: #fff;
  transform:translateY(-2px);
}

.mini-btn[title]:hover:after {
  content: attr(title);
  position:absolute; bottom:-35px; left:50%;transform:translateX(-50%);
  background: #111e2d; color:#ffc95c; font-size:.93em; padding:2.5px 9px;
  border-radius:6px;pointer-events:none;white-space:nowrap;z-index:5;
  border:1.5px solid #3477c7;
}

.mini-btn svg {
  width:18px;
  height:18px;
  display:block;
}

.board-title-wrap {
  flex:1; text-align:center;
}

h1 {
  font-size:2.1em;
  margin:0 0 7px 0;
  letter-spacing:1px;
  color:var(--highlight);
  font-weight:700;
}

.kanban-wrap {
  width:98vw;
  max-width:1330px;
  margin:0 auto 1em auto;
  display:flex;
  flex-direction:column;
  align-items:center;
  position:relative;
}

.task-form-container {
  width:100%;
  max-width:720px;
  position:relative;
  margin-bottom:16px;
}

.task-form-container[hidden] {
  display:none;
}

form {
  background: var(--card);
  border-radius: var(--rounded);
  box-shadow: var(--shadow);
  width:100%;
  margin:0 auto;
  padding:13px 12px 9px 12px;
  display:flex;
  gap:9px 0;
  flex-wrap:wrap;
  align-items: flex-end;
  justify-content:flex-start;
  position: relative;
}

.kanban-wrap label {
  font-size:0.93em;
  color:#aab3c6;
  display:block;
  margin-bottom:1.5px;
}

input[type="text"], textarea, select {
  background: var(--input);
  border-radius: 6px;
  border: 1.2px solid #1a2233;
  color: var(--text);
  outline: none;
  font-size: 1.01em;
  padding: 4.5px 8px;
  box-shadow: none;
  margin-bottom: 7px;
  transition: border-color .2s;
  min-width:115px;
  max-width:220px;
}

textarea {
  resize:vertical;
  min-width:85px;
  min-height:22px;
  max-width:95vw;
}

.form-group {
  display:flex;
  flex-direction:column;
  margin:0 4px 0 0;
}

.add-btn-inner {
  background:var(--blue);
  color:#fff;
  box-shadow:0 3px 10px #1a2851c6;
  padding:6px 11px;
  font-weight:600;
  font-size:1em;
  border-radius:7px;
  border:none;
  transition:background .13s,transform .11s;
  cursor:pointer;
}

.add-btn-inner:hover {
  background: #1381e6;
  color:#fff;
  transform:translateY(-2px);
}

.board {
  display: flex;
  gap: 23px;
  width: 100%;
  align-items: flex-start;
  margin:1px auto 0 auto;
  justify-content:center;
  flex-wrap:wrap;
  min-height: 241px;
}

.column {
  background: var(--card);
  border-radius: var(--rounded);
  box-shadow: var(--shadow);
  width:100%;
  max-width:355px;
  min-width:205px;
  flex:1 1 265px;
  margin:0 0 32px 0;
  display:flex;
  flex-direction:column;
  max-height:78vh;
  overflow:auto;
  padding-bottom:2px;
}

.column h2 {
  font-size:1.14em;
  font-weight:700;
  color:var(--highlight);
  margin:16px 0 9px 0;
  letter-spacing:.9px;
  text-align:center;
}

.task {
  background: var(--task-gradient);
  color: #e3e6ed;
  margin: 11px 10px 21px 13px;
  padding: 11px 13px 14px 12px;
  border-radius: 10px;
  box-shadow:0 3px 12px #08102013,0 1.5px 2px #1926;
  position: relative;
  font-size:1.06em;
  border-left: 5px solid var(--accent-low);
  cursor:pointer;
  min-height:41px;
  display:flex;
  flex-direction:column;
  transition:all .17s;
  outline:2.6px solid transparent;
  max-width:96%;
  overflow:visible;
  box-shadow:0 2.5px 12px #1122;
}

.task:active {
  outline:2.6px solid var(--highlight);
}

.priority-high {
  border-left:6px solid var(--accent-high);
}

.priority-medium {
  border-left:6px solid var(--accent-medium);
}

.priority-low {
  border-left:5px solid var(--accent-low);
}

.task strong {
  font-size:1.13em;
}

.selected-task {
  box-shadow: 0 0 12px 3px var(--highlight) !important;
  background-color: #1e2a59 !important;
}

.day-badge {
  display:inline-block;
  padding:3.5px 11px 3.5px 11px;
  border-radius:7px;
  color:#fff;
  font-size:.95em;
  font-weight:650;
  margin:0 7px 0 0;
  letter-spacing:.5px;
  position:relative;
  top:-2px;
  box-shadow:0 1.5px 6px #223d86cc;
}

.day-badge.today {
  background:#3399ff;
}

.day-badge.yesterday {
  background:#f39c12;
}

.day-badge.tomorrow {
  background:#21ce7e;
}

.task-tags {
  margin:0;
  display:flex;
  flex-wrap:wrap;
  gap:7px;
}

.tag {
  background:var(--tag);
  color:white;
  padding:3px 10px;
  border-radius:4px;
  font-size:0.92em;
  margin-right:3px;
  margin-bottom:1.2px;
  cursor:pointer;
  transition:opacity .15s;
}

.tag:hover {
  opacity:.73;
}

.tag-input {
  margin:3px 0 1px 0;
  padding:6px 7px;
  border-radius:5px;
  width:93%;
  font-size:1em;
  background:var(--input);
  color:var(--text);
  border:1px solid #252b3b;
}

.tag-input:focus {
  border-color:var(--highlight);
}

.dates {
  margin:6px 0 0 0;
  font-size:0.9em;
  color:#b2bede;
}

.delete-btn {
  position:absolute;
  top:6px;
  right:10px;
  background:var(--accent-high);
  border:none;
  border-radius:7px;
  color:#fff;
  font-weight:700;
  font-size:1.09em;
  padding:2px 10px;
  cursor:pointer;
  z-index:1;
  transition:background .13s;
  box-shadow:0 2px 10px #401a;
  outline:none;
}

.delete-btn:hover {
  background:#b13723;
}

.task-desc-form {
  margin:15px 2px 2px 0;
  padding:0;
  background:#161a23;
  border-radius:6px;
  box-shadow:0 2px 12px #3477;
  display:flex;
  flex-direction:column;
  align-items:flex-end;
  gap:6px;
  position:relative;
  z-index:9;
  width:95%;
  max-width:97%;
  animation: fadein .17s;
}

.task-desc-form textarea {
  width:98%;
  min-height:26px;
  font-size:1em;
  border-radius:5px;
  border:1px solid #298;
  background:#222938;
  color:#fff;
  padding:7px 7px;
  resize:vertical;
  box-shadow:0 2.5px 8px #3252;
}

.task-desc-form .desc-controls {
  display:flex;
  gap:9px;
  margin-right:3px;
  margin-bottom:7px;
}

.desc-save, .desc-cancel {
  background: var(--blue);
  color:#fff;
  font-size:.92em;
  border:none;
  border-radius:5px;
  padding:6px 15px;
  font-weight:700;
  cursor:pointer;
  box-shadow:0 1px 5px #366;
  transition:background .14s;
}

.desc-cancel {
  background: #d13a19;
}

.desc-save:hover {
  background: #198ddc;
}

.desc-cancel:hover {
  background:#bb281b;
}

#snackbar {
  visibility:hidden;
  min-width:170px;
  background:#383c4c;
  color:#f3c05c;
  text-align:left;
  border-radius:7px;
  padding:9px 18px;
  position:fixed;
  z-index:50;
  right:32px;
  bottom:36px;
  font-size:1em;
  font-weight:500;
  box-shadow:0 2px 12px #000a;
}

#snackbar.show {
  visibility:visible;
  animation:fadein 0.4s,fadeout 0.9s 2.3s;
}

#emptyNote {
  color: #ffc95c;
  background-color: #333844;
  padding: 12px 20px;
  border-radius: 10px;
  margin-bottom: 24px;
  text-align: center;
  font-weight: 600;
}

#privacyNotice {
  font-size: 0.9em;
  color: #999;
  text-align: center;
  padding: 10px;
  margin-top: 12px;
  user-select: none;
}

@keyframes fadein {
  from { bottom:0; opacity:0; }
  to { bottom:36px; opacity:1; }
}

@keyframes fadeout {
  from { bottom:36px; opacity:1; }
  to { bottom:0; opacity:0; }
}

#importFile {
  display:none;
}

@media (max-width:900px) {
  .header-row {
    flex-direction:column;
    gap:7px;
  }
  .mini-btn {
    margin:0 auto 6px auto;
  }
  .task-form-container, form {
    max-width:99vw;
  }
  .search-box {
    margin-left:5vw;
  }
}

@media (max-width:680px) {
  .header-row {
    flex-direction:column;
  }
  .kanban-wrap, .board {
    width:100vw;
    max-width:none;
  }
  .column {
    min-width:93vw;
    max-width:none;
  }
  .task {
    margin-left:3vw;
    margin-right:3vw;
  }
  .task-form-container, form {
    max-width:99vw;
  }
  .form-group {
    min-width:80vw;
  }
  input[type="text"],textarea,select {
    width:86vw;
  }
  #snackbar {
    right:5vw;
    min-width:91vw;
  }
  .search-box {
    margin-left:2vw;
    min-width:110px;
  }
}
